@import (reference) '../base';
@import (reference) '../caret/caret';
@import (reference) '../slide/slide';

.kf-datime(@color) {
  //.date > .slides > div
  > div > div > div {
    > span {
      &:first-child {
        .kf-tip-arrow(up, @color, 6px);
      }
      &:last-child {
        .kf-tip-arrow(down, @color, 6px);
      }
    }

    span[kf-datime-active] {
      color: @color;
    }
  }

  table {
    th {
      background-color: @color;
    }

    td[kf-datime-active] > div {
      background-color: @color;
    }
  }
}

.datime {
  border: 1px solid @lgray;
  width: 180px;
  padding: 8px 5px 5px;
  position: relative;

  > .date,
  > .time {
    display: inline-block;
    border-bottom: 5px solid transparent;

    &.date {
      position: relative;
      padding-left: 3px;
    }

    &.time {
      position: absolute;
      right: 5px;
      > .title > span:last-child {
        .kf-tip-arrow(down, @lwarm, 3px);
      }

      > .slides {
        right: 0;
        left: auto;
      }
    }

    > .title {
      cursor: pointer;
      font-size: 12px;
      > span {
        display: inline-block;
        vertical-align: middle;
        color: @lwarm;
        margin-right: 2px;

        &:last-child {
          .kf-tip-arrow(down, @lwarm, 3px);
        }
      }
    }

    > .title:hover + .slides,
    > .slides:hover {
      visibility: visible;
    }

    > .slides {
      top: 100%;
      box-shadow: 3px 3px @lgray;

      text-align: center;
      position: absolute;
      left: 0;
      width: 180px;
      height: 100px;
      z-index: 1;
      background-color: white;
      border: 1px solid @lgray;
      margin-left: -2px;
      padding: 10px 0;
      visibility: hidden;

      > div {
        display: inline-block;
        position: relative;
        height: 100%;
        width: percentage(1/3);

        box-sizing: border-box;
        overflow: hidden;
        font-size: 12px;

        > span {
          display: none;
          position: absolute;
          left: 50%;
          transform: translateX(-4px);
          z-index: 1;

          &:first-child {
            top: 25%;
          }
          &:last-child {
            bottom: 25%;
          }
        }

        &:hover {
          cursor: row-resize;
          > span {
            display: block;
            cursor: pointer;
          }
        }

        &.year .slide {
          line-height: 40px;
          .kf-circle-slide(100%, 40px);
        }
        &.month .slide {
          line-height: 40px;
          .kf-circle-slide(100%, 40px);
        }
        &.hour .slide {
          line-height: 41px;
          .kf-circle-slide(100%, 41px);
        }
        &.minute .slide {
          line-height: 40px;
          .kf-circle-slide(100%, 40px);
        }
        &.second .slide {
          line-height: 40px;
          .kf-circle-slide(100%, 40px);
        }

        .slide {
          position: absolute;
          top: 50%;
          transform: translateY(-50%);

          .el {
            height: 100%;
            text-align: center;
            transition: font .5s linear, color .5s linear;

            &:not([kf-datime-active]) {
              color: @dgray;
            }

            &[kf-datime-active] {
              font-size: 14px;
            }
          }
        }
      }
    }
  }

  > table {
    font-size: 12px;
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;

    th {
      text-align: center;
      padding-top: 5px;
      padding-bottom: 5px;
      color: white;
    }
    td {
      text-align: center;
      cursor: pointer;
      box-sizing: border-box;
      padding: 2px;
      color: @lwarm;

      > div {
        padding: 5px 0;
        box-sizing: border-box;
      }

      &[kf-datime-active] > div {
        border-radius: 50%;
        color: white;
      }
    }
  }
}

.kf-datime-picker(@color, @fontSize) {
  font-size: @fontSize;

  > div:first-child {
    > * {
      height: @fontSize + 20px;
      line-height: @fontSize + 20px;
    }
  }
}
.dtpicker {
  .kf-datime-picker(@lprimary, 12px);

  display: inline-block;
  position: relative;

  > div:first-child {
    > * {
      display: inline-block;
      box-sizing: border-box;
      padding-left: 10px;
      padding-right: 15px;
      vertical-align: middle;

      &:first-child {
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
      }
      &:last-child {
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
      }
    }

    > label {
      background-color: @lprimary;
      color: white;
      &:first-child {
        margin-right: -2px;
      }
    }

    > input {
      font-size: inherit;
      border: none;
      border-top: 1px solid @lprimary;
      border-bottom: 1px solid @lprimary;
      outline: none;
      padding-left: 9.5px;
      padding-right: 14.5px;

      &:first-child {
        border-left: 1px solid @lprimary;
      }
      &:last-child {
        border-right: 1px solid @lprimary;
      }
    }
  }

  > .bg {
    position: fixed;
    left: 0;
    top: 0;
    height: 100%;
    width: 100%;
    opacity: 0;
  }

  i {
    position: absolute;
    right: 5px;
    color: @lgray;
    height: 12px;
    line-height: 12px;
    top: 50%;
    margin-top: -6px;
    cursor: pointer;
  }

  > .datime {
    .kf-datime(@lprimary);
    position: absolute;
    left: 0;
    top: 100%;
    z-index: 2016;
    background-color: white;
    border-radius: 3px;
    margin-top: 3px;

    &.left.bottom {
      box-shadow: 2px 2px @lgray;
    }
    &.left.top {
      box-shadow: 2px -2px @lgray;
    }
    &.right.bottom {
      box-shadow: -2px 2px @lgray;
    }
    &.right.top {
      box-shadow: -2px -2px @lgray;
    }

    &.right {
      right: 0;
      left: auto;
      box-shadow: inset;
    }
    &.top {
      bottom: 100%;
      top: auto;
      margin-bottom: 3px;
      margin-top: 0;
    }

    &.hidden {
      visibility: hidden;
    }
  }
}
